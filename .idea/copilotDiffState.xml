<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/crimetracking/ProfileActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/crimetracking/ProfileActivity.kt" />
              <option name="originalContent" value="package com.example.crimetracking&#10;&#10;import android.app.AlertDialog&#10;import android.os.Bundle&#10;import android.util.Patterns&#10;import android.view.LayoutInflater&#10;import android.view.View&#10;import android.widget.*&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.recyclerview.widget.LinearLayoutManager&#10;import androidx.recyclerview.widget.RecyclerView&#10;import com.google.firebase.auth.EmailAuthProvider&#10;import com.google.firebase.auth.FirebaseAuth&#10;import com.google.firebase.firestore.ktx.firestore&#10;import com.google.firebase.ktx.Firebase&#10;&#10;class ProfileActivity : AppCompatActivity() {&#10;&#10;    private lateinit var auth: FirebaseAuth&#10;    private val db = Firebase.firestore&#10;    private lateinit var emergencyContactsAdapter: EmergencyContactsAdapter&#10;    private val emergencyContacts = mutableListOf&lt;EmergencyContact&gt;()&#10;&#10;    private lateinit var tvFirstName: TextView&#10;    private lateinit var tvLastName: TextView&#10;    private lateinit var tvEmail: TextView&#10;    private lateinit var btnChangeEmail: Button&#10;    private lateinit var btnChangePassword: Button&#10;    private lateinit var btnAddEmergencyContact: Button&#10;    private lateinit var rvEmergencyContacts: RecyclerView&#10;    private lateinit var tvNoContacts: TextView&#10;    private lateinit var btnBack: ImageButton&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_profile)&#10;&#10;        auth = FirebaseAuth.getInstance()&#10;&#10;        // Initialize views&#10;        tvFirstName = findViewById(R.id.tvFirstName)&#10;        tvLastName = findViewById(R.id.tvLastName)&#10;        tvEmail = findViewById(R.id.tvEmail)&#10;        btnChangeEmail = findViewById(R.id.btnChangeEmail)&#10;        btnChangePassword = findViewById(R.id.btnChangePassword)&#10;        btnAddEmergencyContact = findViewById(R.id.btnAddEmergencyContact)&#10;        rvEmergencyContacts = findViewById(R.id.rvEmergencyContacts)&#10;        tvNoContacts = findViewById(R.id.tvNoContacts)&#10;        btnBack = findViewById(R.id.btnBack)&#10;&#10;        // Setup RecyclerView&#10;        emergencyContactsAdapter = EmergencyContactsAdapter(&#10;            emergencyContacts,&#10;            onEditClick = { contact -&gt; showEditEmergencyContactDialog(contact) },&#10;            onDeleteClick = { contact -&gt; deleteEmergencyContact(contact) }&#10;        )&#10;        rvEmergencyContacts.layoutManager = LinearLayoutManager(this)&#10;        rvEmergencyContacts.adapter = emergencyContactsAdapter&#10;&#10;        // Load user data&#10;        loadUserProfile()&#10;        loadEmergencyContacts()&#10;&#10;        // Set click listeners&#10;        btnBack.setOnClickListener {&#10;            finish()&#10;        }&#10;&#10;        btnChangeEmail.setOnClickListener {&#10;            showChangeEmailDialog()&#10;        }&#10;&#10;        btnChangePassword.setOnClickListener {&#10;            showChangePasswordDialog()&#10;        }&#10;&#10;        btnAddEmergencyContact.setOnClickListener {&#10;            showAddEmergencyContactDialog()&#10;        }&#10;    }&#10;&#10;    private fun loadUserProfile() {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            // Display email&#10;            tvEmail.text = user.email&#10;&#10;            // Load full name from Firestore&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .get()&#10;                .addOnSuccessListener { document -&gt;&#10;                    if (document != null &amp;&amp; document.exists()) {&#10;                        val fullName = document.getString(&quot;fullName&quot;) ?: &quot;&quot;&#10;                        val nameParts = fullName.split(&quot; &quot;, limit = 2)&#10;&#10;                        if (nameParts.isNotEmpty()) {&#10;                            tvFirstName.text = nameParts[0]&#10;                            if (nameParts.size &gt; 1) {&#10;                                tvLastName.text = nameParts[1]&#10;                            } else {&#10;                                tvLastName.text = &quot;&quot;&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    Toast.makeText(this, &quot;Error loading profile: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun loadEmergencyContacts() {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .collection(&quot;emergencyContacts&quot;)&#10;                .get()&#10;                .addOnSuccessListener { documents -&gt;&#10;                    emergencyContacts.clear()&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Loaded ${documents.size()} emergency contacts&quot;)&#10;                    for (document in documents) {&#10;                        val contact = EmergencyContact(&#10;                            id = document.id,&#10;                            name = document.getString(&quot;name&quot;) ?: &quot;&quot;,&#10;                            relation = document.getString(&quot;relation&quot;) ?: &quot;&quot;,&#10;                            phoneNumber = document.getString(&quot;phoneNumber&quot;) ?: &quot;&quot;&#10;                        )&#10;                        emergencyContacts.add(contact)&#10;                        android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Contact: ${contact.name}, ${contact.relation}, ${contact.phoneNumber}&quot;)&#10;                    }&#10;                    emergencyContactsAdapter.notifyDataSetChanged()&#10;                    updateEmptyState()&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    android.util.Log.e(&quot;ProfileActivity&quot;, &quot;Error loading contacts&quot;, e)&#10;                    Toast.makeText(this, &quot;Error loading contacts: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun updateEmptyState() {&#10;        android.util.Log.d(&quot;ProfileActivity&quot;, &quot;updateEmptyState called. Contact count: ${emergencyContacts.size}&quot;)&#10;        if (emergencyContacts.isEmpty()) {&#10;            rvEmergencyContacts.visibility = View.GONE&#10;            tvNoContacts.visibility = View.VISIBLE&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Showing empty state&quot;)&#10;        } else {&#10;            rvEmergencyContacts.visibility = View.VISIBLE&#10;            tvNoContacts.visibility = View.GONE&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Showing RecyclerView with ${emergencyContacts.size} contacts&quot;)&#10;        }&#10;    }&#10;&#10;    private fun showChangeEmailDialog() {&#10;        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_change_email, null)&#10;        val etNewEmail = dialogView.findViewById&lt;EditText&gt;(R.id.etNewEmail)&#10;        val etPassword = dialogView.findViewById&lt;EditText&gt;(R.id.etPassword)&#10;&#10;        AlertDialog.Builder(this)&#10;            .setTitle(&quot;Change Email&quot;)&#10;            .setView(dialogView)&#10;            .setPositiveButton(&quot;Change&quot;) { _, _ -&gt;&#10;                val newEmail = etNewEmail.text.toString().trim()&#10;                val password = etPassword.text.toString()&#10;&#10;                if (newEmail.isEmpty() || !Patterns.EMAIL_ADDRESS.matcher(newEmail).matches()) {&#10;                    Toast.makeText(this, &quot;Please enter a valid email&quot;, Toast.LENGTH_SHORT).show()&#10;                    return@setPositiveButton&#10;                }&#10;&#10;                if (password.isEmpty()) {&#10;                    Toast.makeText(this, &quot;Please enter your password&quot;, Toast.LENGTH_SHORT).show()&#10;                    return@setPositiveButton&#10;                }&#10;&#10;                changeEmail(newEmail, password)&#10;            }&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .show()&#10;    }&#10;&#10;    private fun changeEmail(newEmail: String, password: String) {&#10;        val user = auth.currentUser&#10;        if (user != null &amp;&amp; user.email != null) {&#10;            // Re-authenticate user first&#10;            val credential = EmailAuthProvider.getCredential(user.email!!, password)&#10;&#10;            user.reauthenticate(credential)&#10;                .addOnSuccessListener {&#10;                    // Update email in Firebase Auth&#10;                    @Suppress(&quot;DEPRECATION&quot;)&#10;                    user.updateEmail(newEmail)&#10;                        .addOnSuccessListener {&#10;                            // Update email in Firestore&#10;                            db.collection(&quot;users&quot;).document(user.uid)&#10;                                .update(&quot;email&quot;, newEmail)&#10;                                .addOnSuccessListener {&#10;                                    tvEmail.text = newEmail&#10;                                    Toast.makeText(this, &quot;Email updated successfully&quot;, Toast.LENGTH_SHORT).show()&#10;                                }&#10;                        }&#10;                        .addOnFailureListener { e -&gt;&#10;                            Toast.makeText(this, &quot;Error updating email: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                        }&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    Toast.makeText(this, &quot;Authentication failed. Check your password.&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun showChangePasswordDialog() {&#10;        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_change_password, null)&#10;        val etCurrentPassword = dialogView.findViewById&lt;EditText&gt;(R.id.etCurrentPassword)&#10;        val etNewPassword = dialogView.findViewById&lt;EditText&gt;(R.id.etNewPassword)&#10;        val etConfirmPassword = dialogView.findViewById&lt;EditText&gt;(R.id.etConfirmPassword)&#10;&#10;        AlertDialog.Builder(this)&#10;            .setTitle(&quot;Change Password&quot;)&#10;            .setView(dialogView)&#10;            .setPositiveButton(&quot;Change&quot;) { _, _ -&gt;&#10;                val currentPassword = etCurrentPassword.text.toString()&#10;                val newPassword = etNewPassword.text.toString()&#10;                val confirmPassword = etConfirmPassword.text.toString()&#10;&#10;                if (currentPassword.isEmpty()) {&#10;                    Toast.makeText(this, &quot;Please enter current password&quot;, Toast.LENGTH_SHORT).show()&#10;                    return@setPositiveButton&#10;                }&#10;&#10;                if (newPassword.length &lt; 6) {&#10;                    Toast.makeText(this, &quot;New password must be at least 6 characters&quot;, Toast.LENGTH_SHORT).show()&#10;                    return@setPositiveButton&#10;                }&#10;&#10;                if (newPassword != confirmPassword) {&#10;                    Toast.makeText(this, &quot;Passwords do not match&quot;, Toast.LENGTH_SHORT).show()&#10;                    return@setPositiveButton&#10;                }&#10;&#10;                changePassword(currentPassword, newPassword)&#10;            }&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .show()&#10;    }&#10;&#10;    private fun changePassword(currentPassword: String, newPassword: String) {&#10;        val user = auth.currentUser&#10;        if (user != null &amp;&amp; user.email != null) {&#10;            // Re-authenticate user first&#10;            val credential = EmailAuthProvider.getCredential(user.email!!, currentPassword)&#10;&#10;            user.reauthenticate(credential)&#10;                .addOnSuccessListener {&#10;                    // Update password&#10;                    user.updatePassword(newPassword)&#10;                        .addOnSuccessListener {&#10;                            Toast.makeText(this, &quot;Password updated successfully&quot;, Toast.LENGTH_SHORT).show()&#10;                        }&#10;                        .addOnFailureListener { e -&gt;&#10;                            Toast.makeText(this, &quot;Error updating password: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                        }&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    Toast.makeText(this, &quot;Authentication failed. Check your current password.&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun showAddEmergencyContactDialog() {&#10;        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_add_emergency_contact, null)&#10;        val etContactName = dialogView.findViewById&lt;EditText&gt;(R.id.etContactName)&#10;        val etContactRelation = dialogView.findViewById&lt;EditText&gt;(R.id.etContactRelation)&#10;        val etContactPhone = dialogView.findViewById&lt;EditText&gt;(R.id.etContactPhone)&#10;&#10;        val dialog = AlertDialog.Builder(this)&#10;            .setTitle(&quot;Add Emergency Contact&quot;)&#10;            .setView(dialogView)&#10;            .setPositiveButton(&quot;Add&quot;, null) // Set to null initially&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .create()&#10;&#10;        dialog.show()&#10;&#10;        // Override the positive button to prevent auto-dismiss&#10;        dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {&#10;            val name = etContactName.text.toString().trim()&#10;            val relation = etContactRelation.text.toString().trim()&#10;            val phone = etContactPhone.text.toString().trim()&#10;&#10;            if (name.isEmpty()) {&#10;                etContactName.error = &quot;Name is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (relation.isEmpty()) {&#10;                etContactRelation.error = &quot;Relation is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (phone.isEmpty()) {&#10;                etContactPhone.error = &quot;Phone number is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            addEmergencyContact(name, relation, phone)&#10;            dialog.dismiss()&#10;        }&#10;    }&#10;&#10;    private fun addEmergencyContact(name: String, relation: String, phoneNumber: String) {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            val contactData = hashMapOf(&#10;                &quot;name&quot; to name,&#10;                &quot;relation&quot; to relation,&#10;                &quot;phoneNumber&quot; to phoneNumber,&#10;                &quot;createdAt&quot; to System.currentTimeMillis()&#10;            )&#10;&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Adding contact: $name, $relation, $phoneNumber&quot;)&#10;&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .collection(&quot;emergencyContacts&quot;)&#10;                .add(contactData)&#10;                .addOnSuccessListener { documentReference -&gt;&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Contact added successfully with ID: ${documentReference.id}&quot;)&#10;                    val newContact = EmergencyContact(&#10;                        id = documentReference.id,&#10;                        name = name,&#10;                        relation = relation,&#10;                        phoneNumber = phoneNumber&#10;                    )&#10;                    emergencyContacts.add(newContact)&#10;                    emergencyContactsAdapter.notifyItemInserted(emergencyContacts.size - 1)&#10;                    updateEmptyState()&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Total contacts now: ${emergencyContacts.size}&quot;)&#10;                    Toast.makeText(this, &quot;Emergency contact added&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    android.util.Log.e(&quot;ProfileActivity&quot;, &quot;Error adding contact&quot;, e)&#10;                    Toast.makeText(this, &quot;Error adding contact: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        } else {&#10;            android.util.Log.e(&quot;ProfileActivity&quot;, &quot;User is null, cannot add contact&quot;)&#10;        }&#10;    }&#10;&#10;    private fun showEditEmergencyContactDialog(contact: EmergencyContact) {&#10;        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_edit_emergency_contact, null)&#10;        val etContactName = dialogView.findViewById&lt;EditText&gt;(R.id.etContactName)&#10;        val etContactRelation = dialogView.findViewById&lt;EditText&gt;(R.id.etContactRelation)&#10;        val etContactPhone = dialogView.findViewById&lt;EditText&gt;(R.id.etContactPhone)&#10;&#10;        // Pre-fill with existing data&#10;        etContactName.setText(contact.name)&#10;        etContactRelation.setText(contact.relation)&#10;        etContactPhone.setText(contact.phoneNumber)&#10;&#10;        val dialog = AlertDialog.Builder(this)&#10;            .setTitle(&quot;Edit Emergency Contact&quot;)&#10;            .setView(dialogView)&#10;            .setPositiveButton(&quot;Save&quot;, null)&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .create()&#10;&#10;        dialog.show()&#10;&#10;        // Override the positive button to prevent auto-dismiss&#10;        dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {&#10;            val name = etContactName.text.toString().trim()&#10;            val relation = etContactRelation.text.toString().trim()&#10;            val phone = etContactPhone.text.toString().trim()&#10;&#10;            if (name.isEmpty()) {&#10;                etContactName.error = &quot;Name is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (relation.isEmpty()) {&#10;                etContactRelation.error = &quot;Relation is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (phone.isEmpty()) {&#10;                etContactPhone.error = &quot;Phone number is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            updateEmergencyContact(contact, name, relation, phone)&#10;            dialog.dismiss()&#10;        }&#10;    }&#10;&#10;    private fun updateEmergencyContact(contact: EmergencyContact, name: String, relation: String, phoneNumber: String) {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            val contactData = hashMapOf(&#10;                &quot;name&quot; to name,&#10;                &quot;relation&quot; to relation,&#10;                &quot;phoneNumber&quot; to phoneNumber,&#10;                &quot;updatedAt&quot; to System.currentTimeMillis()&#10;            )&#10;&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Updating contact: ${contact.id}&quot;)&#10;&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .collection(&quot;emergencyContacts&quot;)&#10;                .document(contact.id)&#10;                .update(contactData as Map&lt;String, Any&gt;)&#10;                .addOnSuccessListener {&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Contact updated successfully&quot;)&#10;                    // Update the contact in the list&#10;                    val position = emergencyContacts.indexOf(contact)&#10;                    if (position != -1) {&#10;                        emergencyContacts[position] = EmergencyContact(&#10;                            id = contact.id,&#10;                            name = name,&#10;                            relation = relation,&#10;                            phoneNumber = phoneNumber&#10;                        )&#10;                        emergencyContactsAdapter.notifyItemChanged(position)&#10;                        Toast.makeText(this, &quot;Contact updated&quot;, Toast.LENGTH_SHORT).show()&#10;                    }&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    android.util.Log.e(&quot;ProfileActivity&quot;, &quot;Error updating contact&quot;, e)&#10;                    Toast.makeText(this, &quot;Error updating contact: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        } else {&#10;            android.util.Log.e(&quot;ProfileActivity&quot;, &quot;User is null, cannot update contact&quot;)&#10;        }&#10;    }&#10;&#10;    private fun deleteEmergencyContact(contact: EmergencyContact) {&#10;        AlertDialog.Builder(this)&#10;            .setTitle(&quot;Delete Contact&quot;)&#10;            .setMessage(&quot;Are you sure you want to delete ${contact.name}?&quot;)&#10;            .setPositiveButton(&quot;Delete&quot;) { _, _ -&gt;&#10;                val user = auth.currentUser&#10;                if (user != null) {&#10;                    db.collection(&quot;users&quot;).document(user.uid)&#10;                        .collection(&quot;emergencyContacts&quot;)&#10;                        .document(contact.id)&#10;                        .delete()&#10;                        .addOnSuccessListener {&#10;                            val position = emergencyContacts.indexOf(contact)&#10;                            if (position != -1) {&#10;                                emergencyContacts.removeAt(position)&#10;                                emergencyContactsAdapter.notifyItemRemoved(position)&#10;                                updateEmptyState()&#10;                                Toast.makeText(this, &quot;Contact deleted&quot;, Toast.LENGTH_SHORT).show()&#10;                            }&#10;                        }&#10;                        .addOnFailureListener { e -&gt;&#10;                            Toast.makeText(this, &quot;Error deleting contact: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                        }&#10;                }&#10;            }&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .show()&#10;    }&#10;}&#10;&#10;// RecyclerView Adapter for Emergency Contacts&#10;class EmergencyContactsAdapter(&#10;    private val contacts: List&lt;EmergencyContact&gt;,&#10;    private val onEditClick: (EmergencyContact) -&gt; Unit,&#10;    private val onDeleteClick: (EmergencyContact) -&gt; Unit&#10;) : RecyclerView.Adapter&lt;EmergencyContactsAdapter.ViewHolder&gt;() {&#10;&#10;    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {&#10;        val tvName: TextView = view.findViewById(R.id.tvContactName)&#10;        val tvRelation: TextView = view.findViewById(R.id.tvContactRelation)&#10;        val tvPhone: TextView = view.findViewById(R.id.tvContactPhone)&#10;        val btnEdit: ImageButton = view.findViewById(R.id.btnEditContact)&#10;        val btnDelete: ImageButton = view.findViewById(R.id.btnDeleteContact)&#10;    }&#10;&#10;    override fun onCreateViewHolder(parent: android.view.ViewGroup, viewType: Int): ViewHolder {&#10;        val view = LayoutInflater.from(parent.context)&#10;            .inflate(R.layout.item_emergency_contact, parent, false)&#10;        return ViewHolder(view)&#10;    }&#10;&#10;    override fun onBindViewHolder(holder: ViewHolder, position: Int) {&#10;        val contact = contacts[position]&#10;        holder.tvName.text = contact.name&#10;        holder.tvRelation.text = contact.relation&#10;        holder.tvPhone.text = contact.phoneNumber&#10;        holder.btnEdit.setOnClickListener {&#10;            onEditClick(contact)&#10;        }&#10;        holder.btnDelete.setOnClickListener {&#10;            onDeleteClick(contact)&#10;        }&#10;    }&#10;&#10;    override fun getItemCount() = contacts.size&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.crimetracking&#10;&#10;import android.app.AlertDialog&#10;import android.os.Bundle&#10;import android.view.LayoutInflater&#10;import android.view.View&#10;import android.widget.*&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.recyclerview.widget.LinearLayoutManager&#10;import androidx.recyclerview.widget.RecyclerView&#10;import com.google.firebase.auth.FirebaseAuth&#10;import com.google.firebase.firestore.ktx.firestore&#10;import com.google.firebase.ktx.Firebase&#10;&#10;class ProfileActivity : AppCompatActivity() {&#10;&#10;    private lateinit var auth: FirebaseAuth&#10;    private val db = Firebase.firestore&#10;    private lateinit var emergencyContactsAdapter: EmergencyContactsAdapter&#10;    private val emergencyContacts = mutableListOf&lt;EmergencyContact&gt;()&#10;&#10;    private lateinit var tvFirstName: TextView&#10;    private lateinit var tvLastName: TextView&#10;    private lateinit var tvEmail: TextView&#10;    private lateinit var btnAddEmergencyContact: Button&#10;    private lateinit var rvEmergencyContacts: RecyclerView&#10;    private lateinit var tvNoContacts: TextView&#10;    private lateinit var btnBack: ImageButton&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_profile)&#10;&#10;        auth = FirebaseAuth.getInstance()&#10;&#10;        // Initialize views&#10;        tvFirstName = findViewById(R.id.tvFirstName)&#10;        tvLastName = findViewById(R.id.tvLastName)&#10;        tvEmail = findViewById(R.id.tvEmail)&#10;        btnAddEmergencyContact = findViewById(R.id.btnAddEmergencyContact)&#10;        rvEmergencyContacts = findViewById(R.id.rvEmergencyContacts)&#10;        tvNoContacts = findViewById(R.id.tvNoContacts)&#10;        btnBack = findViewById(R.id.btnBack)&#10;&#10;        // Setup RecyclerView&#10;        emergencyContactsAdapter = EmergencyContactsAdapter(&#10;            emergencyContacts,&#10;            onEditClick = { contact -&gt; showEditEmergencyContactDialog(contact) },&#10;            onDeleteClick = { contact -&gt; deleteEmergencyContact(contact) }&#10;        )&#10;        rvEmergencyContacts.layoutManager = LinearLayoutManager(this)&#10;        rvEmergencyContacts.adapter = emergencyContactsAdapter&#10;&#10;        // Load user data&#10;        loadUserProfile()&#10;        loadEmergencyContacts()&#10;&#10;        // Set click listeners&#10;        btnBack.setOnClickListener {&#10;            finish()&#10;        }&#10;&#10;&#10;        btnAddEmergencyContact.setOnClickListener {&#10;            showAddEmergencyContactDialog()&#10;        }&#10;    }&#10;&#10;    private fun loadUserProfile() {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            // Display email&#10;            tvEmail.text = user.email&#10;&#10;            // Load full name from Firestore&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .get()&#10;                .addOnSuccessListener { document -&gt;&#10;                    if (document != null &amp;&amp; document.exists()) {&#10;                        val fullName = document.getString(&quot;fullName&quot;) ?: &quot;&quot;&#10;                        val nameParts = fullName.split(&quot; &quot;, limit = 2)&#10;&#10;                        if (nameParts.isNotEmpty()) {&#10;                            tvFirstName.text = nameParts[0]&#10;                            if (nameParts.size &gt; 1) {&#10;                                tvLastName.text = nameParts[1]&#10;                            } else {&#10;                                tvLastName.text = &quot;&quot;&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    Toast.makeText(this, &quot;Error loading profile: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun loadEmergencyContacts() {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .collection(&quot;emergencyContacts&quot;)&#10;                .get()&#10;                .addOnSuccessListener { documents -&gt;&#10;                    emergencyContacts.clear()&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Loaded ${documents.size()} emergency contacts&quot;)&#10;                    for (document in documents) {&#10;                        val contact = EmergencyContact(&#10;                            id = document.id,&#10;                            name = document.getString(&quot;name&quot;) ?: &quot;&quot;,&#10;                            relation = document.getString(&quot;relation&quot;) ?: &quot;&quot;,&#10;                            phoneNumber = document.getString(&quot;phoneNumber&quot;) ?: &quot;&quot;&#10;                        )&#10;                        emergencyContacts.add(contact)&#10;                        android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Contact: ${contact.name}, ${contact.relation}, ${contact.phoneNumber}&quot;)&#10;                    }&#10;                    emergencyContactsAdapter.notifyDataSetChanged()&#10;                    updateEmptyState()&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    android.util.Log.e(&quot;ProfileActivity&quot;, &quot;Error loading contacts&quot;, e)&#10;                    Toast.makeText(this, &quot;Error loading contacts: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun updateEmptyState() {&#10;        android.util.Log.d(&quot;ProfileActivity&quot;, &quot;updateEmptyState called. Contact count: ${emergencyContacts.size}&quot;)&#10;        if (emergencyContacts.isEmpty()) {&#10;            rvEmergencyContacts.visibility = View.GONE&#10;            tvNoContacts.visibility = View.VISIBLE&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Showing empty state&quot;)&#10;        } else {&#10;            rvEmergencyContacts.visibility = View.VISIBLE&#10;            tvNoContacts.visibility = View.GONE&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Showing RecyclerView with ${emergencyContacts.size} contacts&quot;)&#10;        }&#10;    }&#10;&#10;&#10;    private fun showAddEmergencyContactDialog() {&#10;        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_add_emergency_contact, null)&#10;        val etContactName = dialogView.findViewById&lt;EditText&gt;(R.id.etContactName)&#10;        val etContactRelation = dialogView.findViewById&lt;EditText&gt;(R.id.etContactRelation)&#10;        val etContactPhone = dialogView.findViewById&lt;EditText&gt;(R.id.etContactPhone)&#10;&#10;        val dialog = AlertDialog.Builder(this)&#10;            .setTitle(&quot;Add Emergency Contact&quot;)&#10;            .setView(dialogView)&#10;            .setPositiveButton(&quot;Add&quot;, null) // Set to null initially&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .create()&#10;&#10;        dialog.show()&#10;&#10;        // Override the positive button to prevent auto-dismiss&#10;        dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {&#10;            val name = etContactName.text.toString().trim()&#10;            val relation = etContactRelation.text.toString().trim()&#10;            val phone = etContactPhone.text.toString().trim()&#10;&#10;            if (name.isEmpty()) {&#10;                etContactName.error = &quot;Name is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (relation.isEmpty()) {&#10;                etContactRelation.error = &quot;Relation is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (phone.isEmpty()) {&#10;                etContactPhone.error = &quot;Phone number is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            addEmergencyContact(name, relation, phone)&#10;            dialog.dismiss()&#10;        }&#10;    }&#10;&#10;    private fun addEmergencyContact(name: String, relation: String, phoneNumber: String) {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            val contactData = hashMapOf(&#10;                &quot;name&quot; to name,&#10;                &quot;relation&quot; to relation,&#10;                &quot;phoneNumber&quot; to phoneNumber,&#10;                &quot;createdAt&quot; to System.currentTimeMillis()&#10;            )&#10;&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Adding contact: $name, $relation, $phoneNumber&quot;)&#10;&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .collection(&quot;emergencyContacts&quot;)&#10;                .add(contactData)&#10;                .addOnSuccessListener { documentReference -&gt;&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Contact added successfully with ID: ${documentReference.id}&quot;)&#10;                    val newContact = EmergencyContact(&#10;                        id = documentReference.id,&#10;                        name = name,&#10;                        relation = relation,&#10;                        phoneNumber = phoneNumber&#10;                    )&#10;                    emergencyContacts.add(newContact)&#10;                    emergencyContactsAdapter.notifyItemInserted(emergencyContacts.size - 1)&#10;                    updateEmptyState()&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Total contacts now: ${emergencyContacts.size}&quot;)&#10;                    Toast.makeText(this, &quot;Emergency contact added&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    android.util.Log.e(&quot;ProfileActivity&quot;, &quot;Error adding contact&quot;, e)&#10;                    Toast.makeText(this, &quot;Error adding contact: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        } else {&#10;            android.util.Log.e(&quot;ProfileActivity&quot;, &quot;User is null, cannot add contact&quot;)&#10;        }&#10;    }&#10;&#10;    private fun showEditEmergencyContactDialog(contact: EmergencyContact) {&#10;        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_edit_emergency_contact, null)&#10;        val etContactName = dialogView.findViewById&lt;EditText&gt;(R.id.etContactName)&#10;        val etContactRelation = dialogView.findViewById&lt;EditText&gt;(R.id.etContactRelation)&#10;        val etContactPhone = dialogView.findViewById&lt;EditText&gt;(R.id.etContactPhone)&#10;&#10;        // Pre-fill with existing data&#10;        etContactName.setText(contact.name)&#10;        etContactRelation.setText(contact.relation)&#10;        etContactPhone.setText(contact.phoneNumber)&#10;&#10;        val dialog = AlertDialog.Builder(this)&#10;            .setTitle(&quot;Edit Emergency Contact&quot;)&#10;            .setView(dialogView)&#10;            .setPositiveButton(&quot;Save&quot;, null)&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .create()&#10;&#10;        dialog.show()&#10;&#10;        // Override the positive button to prevent auto-dismiss&#10;        dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {&#10;            val name = etContactName.text.toString().trim()&#10;            val relation = etContactRelation.text.toString().trim()&#10;            val phone = etContactPhone.text.toString().trim()&#10;&#10;            if (name.isEmpty()) {&#10;                etContactName.error = &quot;Name is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (relation.isEmpty()) {&#10;                etContactRelation.error = &quot;Relation is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            if (phone.isEmpty()) {&#10;                etContactPhone.error = &quot;Phone number is required&quot;&#10;                return@setOnClickListener&#10;            }&#10;&#10;            updateEmergencyContact(contact, name, relation, phone)&#10;            dialog.dismiss()&#10;        }&#10;    }&#10;&#10;    private fun updateEmergencyContact(contact: EmergencyContact, name: String, relation: String, phoneNumber: String) {&#10;        val user = auth.currentUser&#10;        if (user != null) {&#10;            val contactData = hashMapOf(&#10;                &quot;name&quot; to name,&#10;                &quot;relation&quot; to relation,&#10;                &quot;phoneNumber&quot; to phoneNumber,&#10;                &quot;updatedAt&quot; to System.currentTimeMillis()&#10;            )&#10;&#10;            android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Updating contact: ${contact.id}&quot;)&#10;&#10;            db.collection(&quot;users&quot;).document(user.uid)&#10;                .collection(&quot;emergencyContacts&quot;)&#10;                .document(contact.id)&#10;                .update(contactData as Map&lt;String, Any&gt;)&#10;                .addOnSuccessListener {&#10;                    android.util.Log.d(&quot;ProfileActivity&quot;, &quot;Contact updated successfully&quot;)&#10;                    // Update the contact in the list&#10;                    val position = emergencyContacts.indexOf(contact)&#10;                    if (position != -1) {&#10;                        emergencyContacts[position] = EmergencyContact(&#10;                            id = contact.id,&#10;                            name = name,&#10;                            relation = relation,&#10;                            phoneNumber = phoneNumber&#10;                        )&#10;                        emergencyContactsAdapter.notifyItemChanged(position)&#10;                        Toast.makeText(this, &quot;Contact updated&quot;, Toast.LENGTH_SHORT).show()&#10;                    }&#10;                }&#10;                .addOnFailureListener { e -&gt;&#10;                    android.util.Log.e(&quot;ProfileActivity&quot;, &quot;Error updating contact&quot;, e)&#10;                    Toast.makeText(this, &quot;Error updating contact: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                }&#10;        } else {&#10;            android.util.Log.e(&quot;ProfileActivity&quot;, &quot;User is null, cannot update contact&quot;)&#10;        }&#10;    }&#10;&#10;    private fun deleteEmergencyContact(contact: EmergencyContact) {&#10;        AlertDialog.Builder(this)&#10;            .setTitle(&quot;Delete Contact&quot;)&#10;            .setMessage(&quot;Are you sure you want to delete ${contact.name}?&quot;)&#10;            .setPositiveButton(&quot;Delete&quot;) { _, _ -&gt;&#10;                val user = auth.currentUser&#10;                if (user != null) {&#10;                    db.collection(&quot;users&quot;).document(user.uid)&#10;                        .collection(&quot;emergencyContacts&quot;)&#10;                        .document(contact.id)&#10;                        .delete()&#10;                        .addOnSuccessListener {&#10;                            val position = emergencyContacts.indexOf(contact)&#10;                            if (position != -1) {&#10;                                emergencyContacts.removeAt(position)&#10;                                emergencyContactsAdapter.notifyItemRemoved(position)&#10;                                updateEmptyState()&#10;                                Toast.makeText(this, &quot;Contact deleted&quot;, Toast.LENGTH_SHORT).show()&#10;                            }&#10;                        }&#10;                        .addOnFailureListener { e -&gt;&#10;                            Toast.makeText(this, &quot;Error deleting contact: ${e.message}&quot;, Toast.LENGTH_SHORT).show()&#10;                        }&#10;                }&#10;            }&#10;            .setNegativeButton(&quot;Cancel&quot;, null)&#10;            .show()&#10;    }&#10;}&#10;&#10;// RecyclerView Adapter for Emergency Contacts&#10;class EmergencyContactsAdapter(&#10;    private val contacts: List&lt;EmergencyContact&gt;,&#10;    private val onEditClick: (EmergencyContact) -&gt; Unit,&#10;    private val onDeleteClick: (EmergencyContact) -&gt; Unit&#10;) : RecyclerView.Adapter&lt;EmergencyContactsAdapter.ViewHolder&gt;() {&#10;&#10;    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {&#10;        val tvName: TextView = view.findViewById(R.id.tvContactName)&#10;        val tvRelation: TextView = view.findViewById(R.id.tvContactRelation)&#10;        val tvPhone: TextView = view.findViewById(R.id.tvContactPhone)&#10;        val btnEdit: ImageButton = view.findViewById(R.id.btnEditContact)&#10;        val btnDelete: ImageButton = view.findViewById(R.id.btnDeleteContact)&#10;    }&#10;&#10;    override fun onCreateViewHolder(parent: android.view.ViewGroup, viewType: Int): ViewHolder {&#10;        val view = LayoutInflater.from(parent.context)&#10;            .inflate(R.layout.item_emergency_contact, parent, false)&#10;        return ViewHolder(view)&#10;    }&#10;&#10;    override fun onBindViewHolder(holder: ViewHolder, position: Int) {&#10;        val contact = contacts[position]&#10;        holder.tvName.text = contact.name&#10;        holder.tvRelation.text = contact.relation&#10;        holder.tvPhone.text = contact.phoneNumber&#10;        holder.btnEdit.setOnClickListener {&#10;            onEditClick(contact)&#10;        }&#10;        holder.btnDelete.setOnClickListener {&#10;            onDeleteClick(contact)&#10;        }&#10;    }&#10;&#10;    override fun getItemCount() = contacts.size&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/activity_profile.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/activity_profile.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:fillViewport=&quot;true&quot;&#10;    android:background=&quot;#1A1A1A&quot;&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:padding=&quot;24dp&quot;&#10;        android:paddingBottom=&quot;40dp&quot;&gt;&#10;&#10;        &lt;!-- Header with Back Button --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;horizontal&quot;&#10;            android:gravity=&quot;center_vertical&quot;&#10;            android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;            &lt;ImageButton&#10;                android:id=&quot;@+id/btnBack&quot;&#10;                android:layout_width=&quot;40dp&quot;&#10;                android:layout_height=&quot;40dp&quot;&#10;                android:src=&quot;@drawable/ic_arrow_back&quot;&#10;                android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;                app:tint=&quot;@color/white&quot;&#10;                android:contentDescription=&quot;Back&quot;&#10;                android:scaleType=&quot;centerInside&quot;&#10;                android:padding=&quot;8dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;0dp&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_weight=&quot;1&quot;&#10;                android:text=&quot;Profile&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;24sp&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:layout_marginStart=&quot;8dp&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Profile Card --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:background=&quot;@drawable/button_home_card&quot;&#10;            android:padding=&quot;20dp&quot;&#10;            android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Personal Information&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;18sp&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;!-- First Name --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;First Name&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:layout_marginBottom=&quot;4dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvFirstName&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;John&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;16sp&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;!-- Last Name --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Last Name&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:layout_marginBottom=&quot;4dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvLastName&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Doe&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;16sp&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;!-- Email --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Email&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:layout_marginBottom=&quot;4dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvEmail&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;john.doe@example.com&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;16sp&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Account Settings Card --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:background=&quot;@drawable/button_home_card&quot;&#10;            android:padding=&quot;20dp&quot;&#10;            android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Account Settings&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;18sp&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;Button&#10;                android:id=&quot;@+id/btnChangeEmail&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Change Email&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:backgroundTint=&quot;@color/redPrimary&quot;&#10;                android:layout_marginBottom=&quot;12dp&quot; /&gt;&#10;&#10;            &lt;Button&#10;                android:id=&quot;@+id/btnChangePassword&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Change Password&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:backgroundTint=&quot;@color/redPrimary&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Emergency Contacts Card --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:background=&quot;@drawable/button_home_card&quot;&#10;            android:padding=&quot;20dp&quot;&gt;&#10;&#10;            &lt;LinearLayout&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:orientation=&quot;horizontal&quot;&#10;                android:gravity=&quot;center_vertical&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;                &lt;TextView&#10;                    android:layout_width=&quot;0dp&quot;&#10;                    android:layout_height=&quot;wrap_content&quot;&#10;                    android:layout_weight=&quot;1&quot;&#10;                    android:text=&quot;Emergency Contacts&quot;&#10;                    android:textColor=&quot;@color/white&quot;&#10;                    android:textSize=&quot;18sp&quot;&#10;                    android:textStyle=&quot;bold&quot; /&gt;&#10;&#10;                &lt;Button&#10;                    android:id=&quot;@+id/btnAddEmergencyContact&quot;&#10;                    android:layout_width=&quot;wrap_content&quot;&#10;                    android:layout_height=&quot;wrap_content&quot;&#10;                    android:text=&quot;+ Add&quot;&#10;                    android:textColor=&quot;@color/white&quot;&#10;                    android:backgroundTint=&quot;@color/redPrimary&quot;&#10;                    android:paddingStart=&quot;16dp&quot;&#10;                    android:paddingEnd=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;/LinearLayout&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvNoContacts&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;No emergency contacts added yet&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;14sp&quot;&#10;                android:gravity=&quot;center&quot;&#10;                android:padding=&quot;24dp&quot;&#10;                android:visibility=&quot;visible&quot; /&gt;&#10;&#10;            &lt;androidx.recyclerview.widget.RecyclerView&#10;                android:id=&quot;@+id/rvEmergencyContacts&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:nestedScrollingEnabled=&quot;false&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;&lt;/ScrollView&gt;&#10;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:fillViewport=&quot;true&quot;&#10;    android:background=&quot;#1A1A1A&quot;&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:padding=&quot;24dp&quot;&#10;        android:paddingBottom=&quot;40dp&quot;&gt;&#10;&#10;        &lt;!-- Header with Back Button --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;horizontal&quot;&#10;            android:gravity=&quot;center_vertical&quot;&#10;            android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;            &lt;ImageButton&#10;                android:id=&quot;@+id/btnBack&quot;&#10;                android:layout_width=&quot;40dp&quot;&#10;                android:layout_height=&quot;40dp&quot;&#10;                android:src=&quot;@drawable/ic_arrow_back&quot;&#10;                android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;                app:tint=&quot;@color/white&quot;&#10;                android:contentDescription=&quot;Back&quot;&#10;                android:scaleType=&quot;centerInside&quot;&#10;                android:padding=&quot;8dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;0dp&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_weight=&quot;1&quot;&#10;                android:text=&quot;Profile&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;24sp&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:layout_marginStart=&quot;8dp&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Profile Card --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:background=&quot;@drawable/button_home_card&quot;&#10;            android:padding=&quot;20dp&quot;&#10;            android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Personal Information&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;18sp&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;!-- First Name --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;First Name&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:layout_marginBottom=&quot;4dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvFirstName&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;John&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;16sp&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;!-- Last Name --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Last Name&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:layout_marginBottom=&quot;4dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvLastName&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Doe&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;16sp&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;!-- Email --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;Email&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:layout_marginBottom=&quot;4dp&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvEmail&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;john.doe@example.com&quot;&#10;                android:textColor=&quot;@color/white&quot;&#10;                android:textSize=&quot;16sp&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Emergency Contacts Card --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:background=&quot;@drawable/button_home_card&quot;&#10;            android:padding=&quot;20dp&quot;&gt;&#10;&#10;            &lt;LinearLayout&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:orientation=&quot;horizontal&quot;&#10;                android:gravity=&quot;center_vertical&quot;&#10;                android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;                &lt;TextView&#10;                    android:layout_width=&quot;0dp&quot;&#10;                    android:layout_height=&quot;wrap_content&quot;&#10;                    android:layout_weight=&quot;1&quot;&#10;                    android:text=&quot;Emergency Contacts&quot;&#10;                    android:textColor=&quot;@color/white&quot;&#10;                    android:textSize=&quot;18sp&quot;&#10;                    android:textStyle=&quot;bold&quot; /&gt;&#10;&#10;                &lt;Button&#10;                    android:id=&quot;@+id/btnAddEmergencyContact&quot;&#10;                    android:layout_width=&quot;wrap_content&quot;&#10;                    android:layout_height=&quot;wrap_content&quot;&#10;                    android:text=&quot;+ Add&quot;&#10;                    android:textColor=&quot;@color/white&quot;&#10;                    android:backgroundTint=&quot;@color/redPrimary&quot;&#10;                    android:paddingStart=&quot;16dp&quot;&#10;                    android:paddingEnd=&quot;16dp&quot; /&gt;&#10;&#10;            &lt;/LinearLayout&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvNoContacts&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;No emergency contacts added yet&quot;&#10;                android:textColor=&quot;@color/textSecondary&quot;&#10;                android:textSize=&quot;14sp&quot;&#10;                android:gravity=&quot;center&quot;&#10;                android:padding=&quot;24dp&quot;&#10;                android:visibility=&quot;visible&quot; /&gt;&#10;&#10;            &lt;androidx.recyclerview.widget.RecyclerView&#10;                android:id=&quot;@+id/rvEmergencyContacts&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:nestedScrollingEnabled=&quot;false&quot; /&gt;&#10;&#10;        &lt;/LinearLayout&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;&lt;/ScrollView&gt;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/build-app.bat">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/build-app.bat" />
              <option name="updatedContent" value="@echo off&#10;echo ========================================&#10;echo   Building Crime Tracking App&#10;echo ========================================&#10;echo.&#10;&#10;cd /d &quot;%~dp0&quot;&#10;&#10;echo Step 1: Cleaning project...&#10;call gradlew.bat clean&#10;&#10;echo.&#10;echo Step 2: Building project...&#10;call gradlew.bat build --stacktrace&#10;&#10;echo.&#10;echo ========================================&#10;echo   Build Complete!&#10;echo ========================================&#10;echo.&#10;echo If successful, you can now run the app.&#10;echo.&#10;pause&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>